import time
from geopy.exc import GeocoderTimedOut, GeocoderUnavailable
from geopy.geocoders import Nominatim

addresses = [
    '8210 Macedonia Commons Blvd, Unit 10, Macedonia, OH 44056',
    '2275 Walker Lake Rd, Mansfield, OH 44903',
    '1705 N Bechtle Ave, Springfield, OH 45504',
    '7574 Voice of America Dr, West Chester, OH 45069',
    '1450 Spring Meadows Dr, Holland, OH 43528',
    '5011 Grande Blvd, Medina, OH 44256',
    '2026 Lincoln Way East, Massillon, OH 44646',
    '1521 Golden Gate Plaza, Mayfield Heights, OH 44124',
    '3439 Princeton Rd, Hamilton, OH 45011',
    '8175 Arbor Square Drive, Mason, OH 45040',
    '245 Rivers Edge, Milford, OH 45150',
    '3909 Gorsky Dr, Zanesville, OH 43701',
    '4333 Feedwire Road, Dayton, OH 45440',
    '2028 Miamisburg Centerville Rd, Dayton, OH 45459',
    '355 Howe Ave, Cuyahoga Falls, OH 44221',
    '3750 W Market St, Fairlawn, OH 44333',
    '5465 Dressler Rd NW, North Canton, OH 44720',
    '26063 Great Northern Plaza, North Olmsted, OH 44070',
    '9122 Mentor Ave, Mentor, OH 44060',
    '6870 Ridge Rd, Parma, OH 44129',
    '11741 Princeton Pike, Springdale, OH 45246',
    '650 Eastgate South Dr, Cincinnati, OH 45245',
    '10164 Colerain Ave, Cincinnati, OH 45251',
    '5336 Westpointe Plaza Dr, Columbus, OH 43228',
    '6010 Sawmill Rd, Dublin, OH 43017',
    '3713 Easton Market, Columbus, OH 43219',
    '8281 Old Troy Pike, Huber Heights, OH 45424',
    '2500 N Fairfield Rd Ste C, Dayton, OH 45431',
    '5812 Youngstown Warren Rd, Niles, OH 44446',
    '1101 Doral Dr, Poland, OH 44514',
    '3401 Alamo Ave, Cincinnati, OH 45209',
    '1184 Polaris Pkwy, Columbus, OH 43240',
    '7355 Market Place Dr, Aurora, OH 44202',
    '1743 Stringtown Rd, Grove City, OH 43123',
    '476 Corwin Nixon Boulevard, South Lebanon, OH 45065',
    '5241 Monroe Street, Toledo, OH 43623',
    '2389 Taylor Park Dr, Reynoldsburg, OH 43068',
    '13923 Cedar Rd, South Euclid, OH 44118',
    '743 E State St, Athens, OH 45701',
    '7400 State Route 161 E, Plain City, OH 43064',
    '3749 BURBANK RD, WOOSTER, OH 44691',
    '27161 Crossroads Parkway, Rossford, OH 43460',
    '8095 East Broad Street, Reynoldsburg, OH 43068',
    '2330 Tiffin Ave, Findlay, OH 45840',
    '36395 Euclid Ave, Willoughby, OH 44094',
    '263 Midway Blvd, Elyria, OH 44035',
    '194 Graceland Blvd, COLUMBUS, OH 43214',
    '3086 Kingsdale Center, UPPER ARLINGTON, OH 43221',
    '6068 Glenway Ave, CINCINNATI, OH 45211',
    '35822 Detroit Rd, AVON, OH 44011',
    '1731 Memorial Drive N., LANCASTER, OH 43130',
    '963 Hebron Road, Heath, OH 43056',
    '3995 Welsh Road, Willow Grove, PA 19090',
    '3739 William Penn Hwy, Monroeville, PA 15146',
    '800 Hatton Drive, Glen Mills, PA 19342',
    '2395 Lincoln Highway, Lancaster, PA 17602',
    '1112 Town Square Rd, Pottstown, PA 19465',
    '248 Westminster Dr, Carlisle, PA 17013',
    '971 Norland Avenue, Chambersburg, PA 17201',
    '139 Radio Dr, Stroudsburg, PA 18360',
    '1616 Matthew Drive, Uniontown, PA 15401',
    '1125 Quentin Rd, Lebanon, PA 17042',
  #  '4210 5th Street Highway, Temple, PA 19560',
    '7422 Bustleton Ave, Philadelphia, PA 19152',
    '620 North West End Boulevard, Quakertown, PA 18951',
    '641 Baltimore Pike, Springfield, PA 19064',
    '1717 Route 228 Ste D, Cranberry TWP, PA 16066',
    '105 Wagner Rd, Monaca, PA 15061',
    '300 Water Loop Drive, Collegeville, PA 19426',
    '181 Wilson Ave, Hanover, PA 17331',
    '1742 E 3rd St, Williamsport, PA 17701',
    '3794 Easton Nazareth Highway, Easton, PA 18045',
    '5986 Centre Ave, Pittsburgh, PA 15206',
    '7451 Peach St Ste B, Erie, PA 16509',
    '145 Witchwood Dr, North Wales, PA 19454',
    '2100 Chemical Rd, Plymouth Meeting, PA 19462',
    '1010 E Lancaster Ave, Downingtown, PA 19335',
    '220 Commerce Blvd, Fairless Hills, PA 19030',
    '2940 Springfield Rd, Broomall, PA 19008',
    '934 W Street Rd, Warminster, PA 18974',
    '4640-60 E Roosevelt Blvd, Philadelphia, PA 19124',
    '650 Commerce Blvd, Dickson City, PA 18519',
    '4200 Derry St, Harrisburg, PA 17111',
    '1700 Fruitville Pike Ste K, Lancaster, PA 17601',
    '420 Home Dr, Pittsburgh, PA 15275',
    '327 Washington Rd, Washington, PA 15301',
    '351 Loucks Rd, York, PA 17404',
    '427 Arena Hub Plaza, Wilkes Barre, PA 18702',
    '11000 Roosevelt Blvd, Philadelphia, PA 19116',
    '2360 W Oregon Ave, Philadelphia, PA 19145',
    '1183 Berkshire Blvd, Wyomissing, PA 19610',
    '2180 MacArthur Rd, Whitehall, PA 18052',
    '901 Old York Rd, Jenkintown, PA 19046',
    '6210 Northway Drive, PITTSBURGH, PA 15237',
    '131 Town Center Road, King Of Prussia, PA 19406',
    '523 Clairton Blvd, Pleasant Hills, PA 15236',
    '475 Ben Franklin Rd S, Indiana, PA 15701',
    '90 Weis Lane, West Hazleton, PA 18202',
    '2573 West State St, New Castle, PA 16101',
    '2102 W. Union Blvd. #22A, Bethlehem, PA 18018',
    '5023 Edgemont Ave, BROOKHAVEN, PA 19015',
    '270 Marketplace Blvd, Selinsgrove, PA 17870',
    '2600 South Eagle Road, Newtown, PA 18940',
    '1015 Village Center Drive, Tarentum, PA 15084',
    '707 N Krocks Rd Ste 200, Allentown, PA 18106',
    '157 Levittown Parkway Ste B, Levittown, PA 19055',
    '5900 Carlisle Pike, Mechanicsburg, PA 17050',
     '6216 Route 30, Greensburg, PA 15601',
    '5098 Jonestown Rd, HARRISBURG, PA 17109',
    '1415 Washington Ave, PHILADELPHIA, PA 19146',
    '310 East Brannon Road, Nicholasville, KY 40356',
    '2929 James Sanders Blvd Ste F, Paducah, KY 42001',
    '1945 Pavillion Way, Lexington, KY 40509',
    '1060 Hansel Ave, Florence, KY 41042',
    '5241 Frederica St, Owensboro, KY 42301',
    '215 N Burkhardt Rd, Evansville, IN 47715',
    '240 N Gates Dr, Bloomington, IN 47404',
    '10035 Lima Road, Ft Wayne, IN 46818',
    '711 US Hwy 41, Schererville, IN 46375',
    '1290 E Ireland Rd, Bldg E, South Bend, IN 46614',
    '17180 Mercantile Blvd, Noblesville, IN 46060',
    '5750 West 86th Street, Indianapolis, IN 46278',
    '3680 S US Hwy 41, Terre Haute, IN 47802',
    '1616 Matthew Drive, Uniontown, PA 15401',
    '105 Wagner Rd, Monaca, PA 15061',
    '300 Water Loop Drive, Collegeville, PA 19426',
    '181 Wilson Ave, Hanover, PA 17331',
    '1742 E 3rd St, Williamsport, PA 17701',
    '3794 Easton Nazareth Highway, Easton, PA 18045',
    '5986 Centre Ave, Pittsburgh, PA 15206',
    '7451 Peach St Ste B, Erie, PA 16509',
    '145 Witchwood Dr, North Wales, PA 19454',
    '2100 Chemical Rd, Plymouth Meeting, PA 19462',
    '1010 E Lancaster Ave, Downingtown, PA 19335',
    '220 Commerce Blvd, Fairless Hills, PA 19030',
    '2940 Springfield Rd, Broomall, PA 19008',
    '934 W Street Rd, Warminster, PA 18974',
    '4640-60 E Roosevelt Blvd, Philadelphia, PA 19124',
    '650 Commerce Blvd, Dickson City, PA 18519',
    '4200 Derry St, Harrisburg, PA 17111',
    '1700 Fruitville Pike Ste K, Lancaster, PA 17601',
    '420 Home Dr, Pittsburgh, PA 15275',
    '327 Washington Rd, Washington, PA 15301',
    '351 Loucks Rd, York, PA 17404',
    '427 Arena Hub Plaza, Wilkes Barre, PA 18702',
    '11000 Roosevelt Blvd, Philadelphia, PA 19116',
    '2360 W Oregon Ave, Philadelphia, PA 19145',
    '1183 Berkshire Blvd, Wyomissing, PA 19610',
    '2180 MacArthur Rd, Whitehall, PA 18052',
    '901 Old York Rd, Jenkintown, PA 19046',
    '6210 Northway Drive, PITTSBURGH, PA 15237',
    '131 Town Center Road, King Of Prussia, PA 19406',
    '523 Clairton Blvd, Pleasant Hills, PA 15236',
    '475 Ben Franklin Rd S, Indiana, PA 15701',
    '90 Weis Lane, West Hazleton, PA 18202',
     '2573 West State St, New Castle, PA 16101',
    '2102 W. Union Blvd. #22A, Bethlehem, PA 18018',
    '5023 Edgemont Ave, BROOKHAVEN, PA 19015',
    '270 Marketplace Blvd, Selinsgrove, PA 17870',
    '2600 South Eagle Road, Newtown, PA 18940',
    '1015 Village Center Drive, Tarentum, PA 15084',
    '707 N Krocks Rd Ste 200, Allentown, PA 18106',
    '157 Levittown Parkway Ste B, Levittown, PA 19055',
    '5900 Carlisle Pike, Mechanicsburg, PA 17050',
    '6216 Route 30, Greensburg, PA 15601',
    '5098 Jonestown Rd, HARRISBURG, PA 17109',
    '1415 Washington Ave, PHILADELPHIA, PA 19146',
    '310 East Brannon Road, Nicholasville, KY 40356',
    '2929 James Sanders Blvd Ste F, Paducah, KY 42001',
    '1945 Pavillion Way, Lexington, KY 40509',
    '1060 Hansel Ave, Florence, KY 41042',
    '5241 Frederica St, Owensboro, KY 42301',
    '2175 Lantern Ridge Drive, Richmond, KY 40475',
    '3580 S Hurstbourne Pkwy, Louisville, KY 40299',
    '10308 Westport Rd, Louisville, KY 40241',
    '4640 Outer Loop Rd, Louisville, KY 40219',
    '10697 East US Highway 36, Avon, IN 46123',
    '711 US Hwy 41, Schererville, IN 46375',
    '1290 E Ireland Rd, Bldg E, South Bend, IN 46614',
    '17180 Mercantile Blvd, Noblesville, IN 46060',
    '5750 West 86th Street, Indianapolis, IN 46278',
    '3680 S US Hwy 41, Terre Haute, IN 47802',
    '711 US Hwy 41, Schererville, IN 46375',
    '10697 East US Highway 36, Avon, IN 46123',
    '2881 E US Route 30, Hobart, IN 46342',
    '215 N Burkhardt Rd, Evansville, IN 47715',
    '240 N Gates Dr, Bloomington, IN 47404',
    '14720 US 31 N, Carmel, IN 46032',
    '4216 S Scatterfield Rd, Anderson, IN 46013',
    '3450 N Morrison Rd, Muncie, IN 47304',
    '4540 Grape Rd, Mishawaka, IN 46545',
    '3500 IN-38, Lafayette, IN 47905',
    '2677 E Main St, Plainfield, IN 46168',
    '5151 E 82nd St, Castleton, IN 46250',
    '9749 E Washington St, Indianapolis, IN 46229',
    '1760 Apple Glen Blvd, Fort Wayne, IN 46804',
    '205 County Road 6 E Ste Z, Elkhart, IN 46514',
    '122 Dunes Plaza, Michigan City, IN 46360',
    '640 W 300N, Warsaw, IN 46582',
    '4014 S Western Ave, Marion, IN 46953',
    '2211 Barrett Dr, Greenfield, IN 46140',
    '10260 Maysville Road, Ft Wayne, IN 46835',
    '1080 N Morton St, Franklin, IN 46131-5526',
    '399 Grand Valley Blvd., Martinsville, IN 46151',
    '150 Silhavy Rd, VALPARAISO, IN 46383',
    '1367 S. Reed Rd, Kokomo, IN 46902',
    '711 US Hwy 41, Schererville, IN 46375',
    '1290 E Ireland Rd, Bldg E, South Bend, IN 46614',
    '17180 Mercantile Blvd, Noblesville, IN 46060',
    '5750 West 86th Street, Indianapolis, IN 46278',
    '3680 S US Hwy 41, Terre Haute, IN 47802',
    '711 US Hwy 41, Schererville, IN 46375',
    '10697 East US Highway 36, Avon, IN 46123',
    '2881 E US Route 30, Hobart, IN 46342',
    '215 N Burkhardt Rd, Evansville, IN 47715',
    '240 N Gates Dr, Bloomington, IN 47404',
    '14720 US 31 N, Carmel, IN 46032',
    '4216 S Scatterfield Rd, Anderson, IN 46013',
    '3450 N Morrison Rd, Muncie, IN 47304',
    '4540 Grape Rd, Mishawaka, IN 46545',
    '3500 IN-38, Lafayette, IN 47905',
    '2677 E Main St, Plainfield, IN 46168',
    '5151 E 82nd St, Castleton, IN 46250',
    '9749 E Washington St, Indianapolis, IN 46229',
    '1760 Apple Glen Blvd, Fort Wayne, IN 46804',
    '205 County Road 6 E Ste Z, Elkhart, IN 46514',
    '7801 US Hwy 31 S, Indianapolis, IN 46227',
    '205 County Road 6 E Ste Z, Elkhart, IN 46514',
    '122 Dunes Plaza, Michigan City, IN 46360',
    '640 W 300N, Warsaw, IN 46582',
    '4014 S Western Ave, Marion, IN 46953',
    '2211 Barrett Dr, Greenfield, IN 46140',
    '10260 Maysville Road, Ft Wayne, IN 46835',
    '1080 N Morton St, Franklin, IN 46131-5526',
    '399 Grand Valley Blvd., Martinsville, IN 46151',
    '150 Silhavy Rd, VALPARAISO, IN 46383',
    '1367 S. Reed Rd, Kokomo, IN 46902',
    '2500 N Fairfield Rd Ste C, Dayton, OH 45431',
    '5812 Youngstown Warren Rd, Niles, OH 44446',
    '1101 Doral Dr, Poland, OH 44514',
    '3401 Alamo Ave, Cincinnati, OH 45209',
    '1184 Polaris Pkwy, Columbus, OH 43240',
    '7355 Market Place Dr, Aurora, OH 44202',
    '1743 Stringtown Rd, Grove City, OH 43123',
    '476 Corwin Nixon Boulevard, South Lebanon, OH 45065',
    '5241 Monroe Street, Toledo, OH 43623',
    '2389 Taylor Park Dr, Reynoldsburg, OH 43068',
    '13923 Cedar Rd, South Euclid, OH 44118',
    '743 E State St, Athens, OH 45701',
    '7400 State Route 161 E, Plain City, OH 43064',
    '3749 BURBANK RD, WOOSTER, OH 44691',
    '27161 Crossroads Parkway, Rossford, OH 43460',
    '8095 East Broad Street, Reynoldsburg, OH 43068',
    '2330 Tiffin Ave, Findlay, OH 45840'
    # ... (continue with more addresses) ...
]

geolocator = Nominatim(user_agent="geoapiExercises")

error_addresses = []
successful_coordinates = []

for address in addresses:
    try:
        location = geolocator.geocode(address, timeout=10)  # Increase timeout to 10 seconds
        if location:
            print(f"Address: {address}")
            print(f"Latitude: {location.latitude}, Longitude: {location.longitude}")
            successful_coordinates.append((address, location.latitude, location.longitude))
            
            # Generate a separate GPX file for this address
            filename = address.replace(',', '').replace(' ', '_') + ".gpx"
            with open(filename, "w") as f:
                f.write('<?xml version="1.0" encoding="UTF-8"?>\n')
                f.write('<gpx version="1.1" creator="ChatGPT" xmlns="http://www.topografix.com/GPX/1/1">\n')
                f.write(f'  <wpt lat="{location.latitude}" lon="{location.longitude}">\n')
                f.write(f'    <name>{address}</name>\n')
                f.write(f'    <desc>{address}</desc>\n')
                f.write('  </wpt>\n')
                f.write('</gpx>\n')
        else:
            error_addresses.append(address)
    except (GeocoderTimedOut, GeocoderUnavailable):
        error_addresses.append(address)
        time.sleep(1)  # Wait for 1 second before retrying the next address
        continue
    time.sleep(.001)  # Introduce a delay of 1 millisecond between requests

# Print addresses with errors
if error_addresses:
    print("\nAddresses with Errors:")
    for err_address in error_addresses:
        print(err_address)